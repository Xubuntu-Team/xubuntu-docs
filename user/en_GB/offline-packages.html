<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Chapter 11. Offline Package Management</title>
    <link rel="stylesheet" type="text/css" href="../../libs-common/css/style.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1" />
    <link rel="home" href="index.html" title="Xubuntu Documentation" />
    <link rel="up" href="index.html" title="Xubuntu Documentation" />
    <link rel="prev" href="software-management.html" title="Chapter 10. Software Management" />
    <link rel="next" href="guide-keeping-safe.html" title="Chapter 12. Keeping your computer and personal information safe" />
    <link rel="copyright" href="credits-license.html" title="Credits and License" />
    <link xmlns="" xmlns:fo="http://www.w3.org/1999/XSL/Format" rel="shortcut icon" href="../../libs-common/images/favicon.png" />
    <meta xmlns="" xmlns:fo="http://www.w3.org/1999/XSL/Format" name="viewport" content="width=device-width, maximum-scale=1.0, minimum-scale=1.0, initial-scale=1" />
    <link xmlns="" xmlns:fo="http://www.w3.org/1999/XSL/Format" rel="stylesheet" href="../../libs-common/css/style-resp-950.css" media="only screen and (max-width:950px)" />
    <link xmlns="" xmlns:fo="http://www.w3.org/1999/XSL/Format" rel="stylesheet" href="../../libs-common/css/style-resp-400.css" media="only screen and (max-width:400px)" />
  </head>
  <body>
    <div xmlns="" xmlns:fo="http://www.w3.org/1999/XSL/Format" id="masthead">
      <a href="index.html">
        <img src="../../libs-common/images/logo.png" alt="Xubuntu" />
      </a>
    </div>
    <div xml:lang="en-GB" class="chapter" lang="en-GB">
      <div class="titlepage">
        <div>
          <div>
            <h1 class="title"><a id="offline-packages"></a>Chapter 11. Offline Package Management</h1>
          </div>
        </div>
      </div>
      <div class="toc">
        <p>
          <strong>Table of Contents</strong>
        </p>
        <dl class="toc">
          <dt>
            <span class="section">
              <a href="offline-packages.html#offline-repo-update">Updating Repositories</a>
            </span>
          </dt>
          <dt>
            <span class="section">
              <a href="offline-packages.html#offline-package-install">Installing a Package</a>
            </span>
          </dt>
          <dt>
            <span class="section">
              <a href="offline-packages.html#offline-system-upgrade">Upgrading Your System</a>
            </span>
          </dt>
        </dl>
      </div>
      <p>The tool <span class="application"><strong>apt-offline</strong></span> is available to help keep your computer up to date even if it cannot be kept connected by using a second internet connected computer, this other computer can run Xubuntu, another flavor of Ubuntu, or Debian. A graphical interface is available via <span class="application"><strong>apt-offline-gui</strong></span>. This document deals with the command line variant.</p>
      <p>Throughout this chapter directions to use a directory on a USB flashdrive are given, the naming and path to this directory is for you to decide beforehand.</p>
      <div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">
        <table border="0" summary="Warning">
          <tr>
            <td rowspan="2" align="center" valign="top" width="25">
              <img alt="[Warning]" src="../../libs-common/images/warning.png" />
            </td>
            <th align="left"></th>
          </tr>
          <tr>
            <td align="left" valign="top">
              <p>A few specific packages are not built to handle the disconnected environment, due to them running download scripts during the installation or upgrade process. Some packages that routinely exhibit this behavior are <span class="application"><strong>flashplugin-installer</strong></span>, <span class="application"><strong>nautilus-dropbox</strong></span>, and <span class="application"><strong>ttf-mscorefonts-installer</strong></span>. There is no workaround for installation packages that themselves make downloads.</p>
            </td>
          </tr>
        </table>
      </div>
      <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
        <table border="0" summary="Note">
          <tr>
            <td rowspan="2" align="center" valign="top" width="25">
              <img alt="[Note]" src="../../libs-common/images/note.png" />
            </td>
            <th align="left"></th>
          </tr>
          <tr>
            <td align="left" valign="top">
              <p>You will want to avoid the use of the <strong class="userinput"><code>-y</code></strong> flag when upgrading so that you get a last chance to look through your upgrades to see if any problems mentioned above show up.</p>
            </td>
          </tr>
        </table>
      </div>
      <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
        <table border="0" summary="Note">
          <tr>
            <td rowspan="2" align="center" valign="top" width="25">
              <img alt="[Note]" src="../../libs-common/images/note.png" />
            </td>
            <th align="left"></th>
          </tr>
          <tr>
            <td align="left" valign="top">
              <p>During the use of <span class="application"><strong>apt-offline</strong></span> some errors in red text may show up about being unable to download files relative to translations, these can be safely ignored.</p>
            </td>
          </tr>
        </table>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a id="offline-repo-update"></a>Updating Repositories</h2>
            </div>
          </div>
        </div>
        <p>After plugging in a USB flash drive and opening a terminal, you can use apt-offline to generate a request to update what your computer knows about software repositories. This allows your computer to see if there are bug fixes, security updates or new software available for your computer.</p>
        <p>From your disconnected computer run: <strong class="userinput"><code>apt-offline set --update apt-offline.sig</code></strong></p>
        <p>Once done, copy <code class="literal">apt-offline.sig</code> to your USB flash drive and take it to another computer. With apt-offline on that computer, use that file to download what your disconnected computer needs to update itself. Navigate to the directory on the flash drive containing apt-offline.sig, enter <strong class="userinput"><code>apt-offline get --bundle bundle.zip apt-offline.sig</code></strong>. When complete remove the USB flash drive and take it back to the disconnected computer.</p>
        <p>At the disconnected computer, re-insert the USB flash drive. Navigate to the directory on the flash drive containing the two files, then enter: <strong class="userinput"><code>sudo apt-offline install bundle.zip</code></strong>. Once the command completes your repositories will be updated.</p>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a id="offline-package-install"></a>Installing a Package</h2>
            </div>
          </div>
        </div>
        <p>You can use apt-offline to download a package to install. This action can also be combined with updating the software repositories. In a disconnected environment, using opportunities to connect efficiently is key.</p>
        <p>In this example, we assume you want to install a new program package. Throughout this we'll refer to this as <span class="emphasis"><em>PACKAGENAME</em></span> though in normal use you will want to enter just the package name. Fairly frequently, installing a package will require you to install dependencies. <span class="application"><strong>apt-offline</strong></span> handles the dependency resolution for you. To start this process open a terminal window, plug in a USB flash drive, and navigate to the directory. From that directory run <strong class="userinput"><code>sudo apt-offline set --install-packages $PACKAGENAME --update apt-offline.sig</code></strong>to start the process</p>
        <p>When complete, copy <code class="literal">apt-offline.sig</code> to your USB flash drive and take it to another computer. With apt-offline on that computer, use that file to download what your disconnected computer needs to update and install PACKAGENAME. Navigate to the directory on the flash drive containing apt-offline.sig, run <strong class="userinput"><code>sudo apt-offline get --bundle bundle.zip apt-offline.sig</code></strong>. The output will show an attempt to download repository updates as well as <span class="emphasis"><em>PACKAGENAME</em></span> and any dependencies your system requires. Remove the USB flash drive when complete and take it back to the disconnected computer.</p>
        <p>At the disconnected computer, insert the USB flash drive. Navigate to the directory on the flash drive containing the two files then enter: <strong class="userinput"><code>sudo apt-offline install bundle.zip</code></strong>. Once it completes your repositories will be updated. Once that completes, you can then install <span class="emphasis"><em>PACKAGENAME</em></span> by then entering: <strong class="userinput"><code>sudo apt-get install PACKAGENAME</code></strong>.</p>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a id="offline-system-upgrade"></a>Upgrading Your System</h2>
            </div>
          </div>
        </div>
        <p>Upgrading packages requires 2 stages: updating repositories and then the download and upgrade as required.</p>
        <p>First update your repositories following the instructions in <a class="xref" href="offline-packages.html#offline-repo-update">Updating Repositories</a></p>
        <p>Clear the directory on USB flash drive that you have used previously. In a fresh terminal window, navigate to the directory on the USB flash drive you intend to work from. Since we never want to lose the opportunity to refresh the disconnected machine's view of the repositories, we can build the command to not only look for upgrade packages but also to update repositories. Enter <strong class="userinput"><code>apt-offline set --update --upgrade apt-offline.sig</code></strong></p>
        <p>Once done, copy <code class="literal">apt-offline.sig</code> to your USB flash drive and take it to another computer. With apt-offline on that computer, you use that file to download what your disconnected computer needs to upgrade itself. Navigate to the directory on the flash drive containing apt-offline.sig, run <strong class="userinput"><code>sudo apt-offline get --bundle bundle.zip apt-offline.sig</code></strong>. The output will show an attempt to download repository updates as well as any upgrades and dependencies required by your system. Once done, remove the USB flash drive and take it back to the disconnected computer.</p>
        <p>At the disconnected computer, insert the USB flash drive navigate to the directory on the flash drive containing the two files, enter <strong class="userinput"><code>sudo apt-offline install bundle.zip</code></strong>. Once it completes your repositories will be updated, you can then install the upgrades by entering: <strong class="userinput"><code>sudo apt-get upgrade</code></strong>.</p>
      </div>
    </div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td width="40%" align="left"><a accesskey="p" href="software-management.html"><img src="../../libs-common/images/prev.png" alt="Prev" /></a> </td>
          <td width="20%" align="center"> </td>
          <td width="40%" align="right"> <a accesskey="n" href="guide-keeping-safe.html"><img src="../../libs-common/images/next.png" alt="Next" /></a></td>
        </tr>
        <tr>
          <td width="40%" align="left" valign="top">Chapter 10. Software Management </td>
          <td width="20%" align="center">
            <a accesskey="h" href="index.html">
              <img src="../../libs-common/images/home.png" alt="Home" />
            </a>
          </td>
          <td width="40%" align="right" valign="top"> Chapter 12. Keeping your computer and personal information safe</td>
        </tr>
      </table>
    </div>
  </body>
</html>
